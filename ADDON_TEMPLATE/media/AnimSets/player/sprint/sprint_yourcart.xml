<?xml version="1.0" encoding="utf-8"?>
<!--
    SPRINT ANIMATION TEMPLATE FOR CUSTOM CARTS

    CRITICAL: See walk_yourcart.xml for detailed documentation.

    Key points:
    - m_Priority AND m_ConditionPriority MUST be 10+ to win over vanilla
    - x_extends works against VANILLA files (DO NOT copy vanilla to your mod)
    - This extends defaultSprint.xml which has 5 blend nodes
-->
<animNode x_extends="defaultSprint.xml">
    <m_Name>sprintYourCart</m_Name>
    <m_AnimName>Bob_YourCart_Walk</m_AnimName>

    <!-- CRITICAL: Priority settings to win over vanilla nodes -->
    <m_Priority>10</m_Priority>
    <m_ConditionPriority>10</m_ConditionPriority>

    <!-- Speed settings (vanilla pattern - sprint uses 0.96) -->
    <m_SpeedScale>0.96</m_SpeedScale>
    <m_Scalar>WalkInjury</m_Scalar>
    <m_Scalar2>WalkSpeed</m_Scalar2>

    <!-- Root motion axis: Z reads Y-forward from Blender exports -->
    <m_deferredBoneAxis>Z</m_deferredBoneAxis>

    <!-- 5 blend nodes for sprint state -->
    <m_2DBlends referenceID="1">
        <m_AnimName>Bob_YourCart_Walk</m_AnimName>
        <m_XPos>0.00</m_XPos>
        <m_YPos>1.00</m_YPos>
        <m_SpeedScale>0.80</m_SpeedScale>
    </m_2DBlends>
    <m_2DBlends referenceID="2">
        <m_AnimName>Bob_YourCart_Walk</m_AnimName>
        <m_XPos>0.00</m_XPos>
        <m_YPos>0.50</m_YPos>
        <m_SpeedScale>0.80</m_SpeedScale>
    </m_2DBlends>
    <m_2DBlends referenceID="3">
        <m_AnimName>Bob_YourCart_Walk</m_AnimName>
        <m_XPos>0.00</m_XPos>
        <m_YPos>0.00</m_YPos>
        <m_SpeedScale>0.80</m_SpeedScale>
    </m_2DBlends>
    <m_2DBlends referenceID="4">
        <m_AnimName>Bob_YourCart_Walk</m_AnimName>
        <m_XPos>-0.50</m_XPos>
        <m_YPos>0.50</m_YPos>
        <m_SpeedScale>0.80</m_SpeedScale>
    </m_2DBlends>
    <m_2DBlends referenceID="5">
        <m_AnimName>Bob_YourCart_Walk</m_AnimName>
        <m_XPos>0.50</m_XPos>
        <m_YPos>0.50</m_YPos>
        <m_SpeedScale>0.80</m_SpeedScale>
    </m_2DBlends>

    <m_Conditions>
        <m_Name>Weapon</m_Name>
        <m_Type>STRING</m_Type>
        <m_Value>yourcart</m_Value>
    </m_Conditions>

    <!-- Prevent activation during turn-around -->
    <m_Conditions>
        <m_Name>isTurningAround</m_Name>
        <m_Type>BOOL</m_Type>
        <m_Value>false</m_Value>
    </m_Conditions>

    <m_Transitions>
        <m_Target>IdleYourCart</m_Target>
        <m_blendInTime>0.5</m_blendInTime>
    </m_Transitions>
    <m_Transitions>
        <m_Target>walkYourCart</m_Target>
        <m_blendInTime>0.5</m_blendInTime>
    </m_Transitions>
    <m_Transitions>
        <m_Target>runYourCart</m_Target>
        <m_blendInTime>0.2</m_blendInTime>
    </m_Transitions>

    <!-- Footstep sounds (vanilla timing: 0.15 and 0.60 for sprint) -->
    <m_Events>
        <m_EventName>Footstep</m_EventName>
        <m_TimePc>0.15</m_TimePc>
        <m_ParameterValue>sprint</m_ParameterValue>
    </m_Events>
    <m_Events>
        <m_EventName>Footstep</m_EventName>
        <m_TimePc>0.60</m_TimePc>
        <m_ParameterValue>sprint</m_ParameterValue>
    </m_Events>
</animNode>
